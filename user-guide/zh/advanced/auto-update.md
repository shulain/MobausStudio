# 自动更新

MobausStudio 桌面版内置自动更新功能，确保你始终使用最新版本。

## 更新机制

### 自动检查

应用启动时会自动检查是否有新版本可用。

### 更新流程

1. **检测更新**: 应用连接更新服务器检查版本
2. **下载更新**: 在后台下载更新包
3. **提示安装**: 下载完成后提示用户安装
4. **安装重启**: 用户确认后安装并重启应用

---

## 手动检查更新

如果想立即检查更新：

1. 点击「设置」→「关于」
2. 点击「检查更新」按钮
3. 如有新版本，按提示操作

---

## 更新通知

### 有新版本时

应用会显示更新提示，包含：
- 新版本号
- 更新内容摘要
- 「立即更新」和「稍后提醒」选项

### 更新下载中

状态栏会显示下载进度。

### 准备安装

下载完成后，会提示重启应用以完成安装。

---

## 各平台更新方式

### macOS

- 下载新版本 DMG
- 自动替换应用程序
- 重启后生效

### Windows

- 下载更新安装包
- 自动运行安装程序
- 重启后生效

### Linux

- 下载新版本 AppImage/deb/rpm
- 提示用户手动安装
- 或自动替换（AppImage）

---

## 更新服务器

更新信息托管在 GitHub Releases：

```
https://github.com/shulain/MobausStudio/releases
```

应用会检查 `latest.json` 文件获取最新版本信息。

---

## 离线更新

如果无法自动更新，可以手动下载安装：

1. 访问 [Releases 页面](https://github.com/shulain/MobausStudio/releases)
2. 下载对应平台的安装包
3. 关闭当前应用
4. 运行安装包覆盖安装

---

## 禁用自动更新

如果需要禁用自动更新检查：

> ⚠️ 不建议禁用，可能错过重要的安全更新。

目前暂不支持在界面中禁用，如有特殊需求请联系我们。

---

## 更新失败处理

### 下载失败

- 检查网络连接
- 稍后重试
- 手动下载安装

### 安装失败

- 确保有足够的磁盘空间
- 确保有安装权限
- 尝试手动下载安装

### 更新后无法启动

1. 尝试重新安装最新版本
2. 如仍有问题，安装上一个稳定版本
3. 提交 Issue 报告问题

---

## 版本回退

如果新版本有问题，需要回退到旧版本：

1. 从 [Releases 页面](https://github.com/shulain/MobausStudio/releases) 下载旧版本
2. 卸载当前版本
3. 安装旧版本

> 注意：回退版本可能导致部分新功能的数据不兼容。

---

## Web 版本更新

Web 版本不支持自动更新，需要手动更新：

### Docker 部署

```bash
docker pull ghcr.io/shulain/mobausstudio:latest
docker-compose up -d --force-recreate
```

### 静态文件部署

1. 下载最新的 `MobausStudio-web.zip`
2. 解压并替换原有文件
3. 清除浏览器缓存

---

## 下一步

- [常见问题](../faq.md) - 查看 FAQ
- [数据管理](./data-management.md) - 备份你的数据
